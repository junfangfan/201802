<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>珠峰培训React教程</title>
    <link rel="stylesheet" type="text/css" href="../static/css/main.css">
</head>
<body>
<div class="nav">
    <div class="logo">
        
            珠峰培训React教程
        
    </div>
<ul><li><a href="../index.html">0.es6</a></li><li><a href="../html/1.async.html">1.async</a></li><li><a href="../html/2.async.html">2.async</a></li><li><a href="../html/3.async.html">3.async</a></li><li><a href="../html/4.node.html">4.node</a></li><li><a href="../html/5.nodeInstall.html">5.nodeInstall</a></li><li><a href="../html/6.REPL.html">6.REPL</a></li><li class="active"><a href="../html/7.global.html">7.global</a></li><li><a href="../html/8.NodeCore.html">8.NodeCore</a></li></ul></div>


<div class="warpper">

    <div class="page-toc">
        <ul><li><a href="#t01. 控制台">1. 控制台</a></li><li><a href="#t12. 全局作用域">2. 全局作用域</a></li><li><a href="#t23. 函数">3. 函数</a></li><li><a href="#t34. process">4. process</a><ul><li><a href="#t44.1 process对象">4.1 process对象</a></li><li><a href="#t54.2 process.nextTick & setImmediate">4.2 process.nextTick & setImmediate</a></li></ul></li><li><a href="#t65.Node中的Event Loop">5.Node中的Event Loop</a><ul><li><a href="#t76.1 poll阶段">6.1 poll阶段</a></li><li><a href="#t86.2 setTimeout 和 setImmediate">6.2 setTimeout 和 setImmediate</a></li></ul></li></ul>
    </div>
    
    <div class="content markdown-body">
        <h2 id="t01. &#x63A7;&#x5236;&#x53F0;">1. &#x63A7;&#x5236;&#x53F0; <a href="#t01. &#x63A7;&#x5236;&#x53F0;"> # </a></h2>
<p>&#x5728;Node.js&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;<code>console</code>&#x5BF9;&#x8C61;&#x4EE3;&#x8868;&#x63A7;&#x5236;&#x53F0;(&#x5728;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E2D;&#x8868;&#x73B0;&#x4E3A;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x6307;&#x5B9A;&#x7684;&#x5B57;&#x7B26;&#x754C;&#x9762;&#xFF0C;&#x6BD4;&#x5982; Window&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x63D0;&#x793A;&#x7A97;&#x53E3;)&#x3002;</p>
<ul>
<li>console.log</li>
<li>console.info</li>
<li>console.error &#x91CD;&#x5B9A;&#x5411;&#x5230;&#x6587;&#x4EF6;</li>
<li>console.warn</li>
<li>console.dir</li>
<li>console.time</li>
<li>console.timeEnd</li>
<li>console.trace</li>
<li>console.assert</li>
</ul>
<h2 id="t12. &#x5168;&#x5C40;&#x4F5C;&#x7528;&#x57DF;">2. &#x5168;&#x5C40;&#x4F5C;&#x7528;&#x57DF; <a href="#t12. &#x5168;&#x5C40;&#x4F5C;&#x7528;&#x57DF;"> # </a></h2>
<ul>
<li>&#x5168;&#x5C40;&#x4F5C;&#x7528;&#x57DF;(global)&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E9B;&#x4E0D;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x4EFB;&#x4F55;&#x6A21;&#x5757;&#x7684;&#x52A0;&#x8F7D;&#x5373;&#x53EF;&#x4F7F;&#x7528;&#x7684;&#x53D8;&#x91CF;&#x3001;&#x51FD;&#x6570;&#x6216;&#x7C7B;</li>
<li>&#x5B9A;&#x4E49;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x65F6;&#x53D8;&#x91CF;&#x4F1A;&#x6210;&#x4E3A;global&#x7684;&#x5C5E;&#x6027;&#x3002;</li>
<li>&#x6C38;&#x8FDC;&#x4E0D;&#x8981;&#x4E0D;&#x4F7F;&#x7528;var&#x5173;&#x952E;&#x5B57;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;&#xFF0C;&#x4EE5;&#x514D;&#x6C61;&#x67D3;&#x5168;&#x5C40;&#x4F5C;&#x7528;&#x57DF;</li>
<li>setTimeout clearTimeout</li>
<li>setInterval clearInterval</li>
<li>unref&#x548C;ref</li>
</ul>
<pre><code>let test = function(){
  console.log(&apos;callback&apos;);
}
let timer = setInterval(test,1000);
timer.unref();
setTimeout(function(){
  timer.ref();
},3000)
</code></pre><h2 id="t23. &#x51FD;&#x6570;">3. &#x51FD;&#x6570; <a href="#t23. &#x51FD;&#x6570;"> # </a></h2>
<ul>
<li>require</li>
<li>&#x6A21;&#x5757;&#x52A0;&#x8F7D;&#x8FC7;&#x7A0B;</li>
<li>require.resolve</li>
<li>&#x6A21;&#x677F;&#x7F13;&#x5B58;(require.cache)</li>
<li>require.main</li>
<li>&#x6A21;&#x5757;&#x5BFC;&#x51FA;<pre><code>module.exports, require, module, filename, dirname
</code></pre></li>
</ul>
<h2 id="t34. process">4. process <a href="#t34. process"> # </a></h2>
<h3 id="t44.1 process&#x5BF9;&#x8C61;">4.1 process&#x5BF9;&#x8C61; <a href="#t44.1 process&#x5BF9;&#x8C61;"> # </a></h3>
<p>&#x5728;node.js&#x91CC;&#xFF0C;process &#x5BF9;&#x8C61;&#x4EE3;&#x8868;node.js&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x7B49;&#x5404;&#x79CD;&#x4FE1;&#x606F;</p>
<pre><code>process.argv.forEach(function(item){
  console.log(item);
});
process.on(&apos;exit&apos;,function(){
  console.log(&apos;clear&apos;);
});

process.on(&apos;uncaughtException&apos;,function(err){
  console.log(err);
})

console.log(process.memoryUsage());
console.log(process.cwd());
console.log(__dirname);
process.chdir(&apos;..&apos;);
console.log(process.cwd());
console.log(__dirname);

function err(){
 throw new Error(&apos;&#x62A5;&#x9519;&#x4E86;&apos;);
}
err();
</code></pre><h3 id="t54.2 process.nextTick &amp; setImmediate">4.2 process.nextTick &amp; setImmediate <a href="#t54.2 process.nextTick &amp; setImmediate"> # </a></h3>
<ul>
<li>process.nextTick()&#x65B9;&#x6CD5;&#x5C06; callback &#x6DFB;&#x52A0;&#x5230;&quot;next tick &#x961F;&#x5217;&quot;&#x3002; &#x4E00;&#x65E6;&#x5F53;&#x524D;&#x4E8B;&#x4EF6;&#x8F6E;&#x8BE2;&#x961F;&#x5217;&#x7684;&#x4EFB;&#x52A1;&#x5168;&#x90E8;&#x5B8C;&#x6210;&#xFF0C;&#x5728;next tick&#x961F;&#x5217;&#x4E2D;&#x7684;&#x6240;&#x6709;callbacks&#x4F1A;&#x88AB;&#x4F9D;&#x6B21;&#x8C03;&#x7528;&#x3002;</li>
<li>setImmediate&#x9884;&#x5B9A;&#x7ACB;&#x5373;&#x6267;&#x884C;&#x7684; callback&#xFF0C;&#x5B83;&#x662F;&#x5728; I/O &#x4E8B;&#x4EF6;&#x7684;&#x56DE;&#x8C03;&#x4E4B;&#x540E;&#x88AB;&#x89E6;&#x53D1;</li>
</ul>
<pre><code>setImmediate(function(){
  console.log(&apos;4&apos;);
});
setImmediate(function(){
  console.log(&apos;5&apos;);
});
process.nextTick(function(){
  console.log(&apos;1&apos;);
  process.nextTick(function(){
    console.log(&apos;2&apos;);
    process.nextTick(function(){
      console.log(&apos;3&apos;);
    });
  });
});

console.log(&apos;next&apos;);
</code></pre><h2 id="t65.Node&#x4E2D;&#x7684;Event Loop">5.Node&#x4E2D;&#x7684;Event Loop <a href="#t65.Node&#x4E2D;&#x7684;Event Loop"> # </a></h2>
<p>&#x5728;libuv&#x5185;&#x90E8;&#x6709;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x73AF;&#x673A;&#x5236;&#x3002;&#x5728;node&#x542F;&#x52A8;&#x65F6;&#x4F1A;&#x521D;&#x59CB;&#x5316;&#x4E8B;&#x4EF6;&#x73AF;</p>
<pre>
<code>   
   &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x250C;&#x2500;&gt;&#x2502;     timers(&#x8BA1;&#x65F6;&#x5668;)     &#x2502;
|  |   &#x6267;&#x884C;setTimeout&#x4EE5;&#x53CA;   |
|  |   setInterval&#x7684;&#x56DE;&#x8C03;&#x3002;  |
&#x2502;  &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
&#x2502;  &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502;  &#x2502;     I/O callbacks     |
&#x2502;  | &#x5904;&#x7406;&#x7F51;&#x7EDC;&#x3001;&#x6D41;&#x3001;tcp&#x7684;&#x9519;&#x8BEF; |
|  | callback              |
&#x2502;  &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
&#x2502;  &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2502;  &#x2502;     idle, prepare     &#x2502;
|  |     node&#x5185;&#x90E8;&#x4F7F;&#x7528;       |
&#x2502;  &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;      
&#x2502;  &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;       &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510; 
&#x2502;  &#x2502;       poll(&#x8F6E;&#x8BE2;)      &#x2502;       &#x2502;   incoming:   &#x2502;
|  | &#x6267;&#x884C;poll&#x4E2D;&#x7684;i/o&#x961F;&#x5217;    | &lt;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2524;  connections, &#x2502;
|  | &#x68C0;&#x67E5;&#x5B9A;&#x65F6;&#x5668;&#x662F;&#x5426;&#x5230;&#x65F6;      |       &#x2502;   data, etc.  |     
&#x2502;  &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;       &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;    
&#x2502;  &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;      
&#x2502;  &#x2502;      check(&#x68C0;&#x67E5;)      &#x2502;
|  | &#x5B58;&#x653E;setImmediate&#x56DE;&#x8C03;   |
&#x2502;  &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x252C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
&#x2502;  &#x250C;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2534;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2510;
&#x2514;&#x2500;&#x2500;&#x2524;    close callbacks    |
   &#x2502; &#x5173;&#x95ED;&#x7684;&#x56DE;&#x8C03;&#x4F8B;&#x5982;         |
   | sockect.on(&apos;close&apos;)   |
   &#x2514;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2500;&#x2518;
</code>
</pre>

<blockquote>
<p>&#x8FD9;&#x91CC;&#x6BCF;&#x4E00;&#x4E2A;&#x9636;&#x6BB5;&#x90FD;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x961F;&#x5217;,&#x5F53;event loop&#x6267;&#x884C;&#x5230;&#x67D0;&#x4E2A;&#x9636;&#x6BB5;&#x65F6;&#x4F1A;&#x5C06;&#x5F53;&#x524D;&#x9636;&#x6BB5;&#x5BF9;&#x5E94;&#x7684;&#x961F;&#x5217;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#x3002;&#x5F53;&#x961F;&#x5217;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x6216;&#x8005;&#x6267;&#x884C;&#x7684;&#x6570;&#x91CF;&#x8D85;&#x8FC7;&#x4E0A;&#x7EBF;&#x65F6;,&#x4F1A;&#x8F6C;&#x5165;&#x4E0B;&#x4E00;&#x4E2A;&#x9636;&#x6BB5;&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x91CD;&#x70B9;&#x5173;&#x6CE8;poll&#x9636;&#x6BB5;</p>
</blockquote>
<h3 id="t76.1 poll&#x9636;&#x6BB5;">6.1 poll&#x9636;&#x6BB5; <a href="#t76.1 poll&#x9636;&#x6BB5;"> # </a></h3>
<p><img src="http://son.fullstackjavascript.cn/poll1.png" alt="poll &#x6D41;&#x7A0B;&#x56FE;"></p>
<h3 id="t86.2 setTimeout &#x548C; setImmediate">6.2 setTimeout &#x548C; setImmediate <a href="#t86.2 setTimeout &#x548C; setImmediate"> # </a></h3>
<p>&#x4E8C;&#x8005;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#xFF0C;&#x4F46;&#x662F;&#x4E8C;&#x8005;&#x533A;&#x522B;&#x53D6;&#x51B3;&#x4E8E;&#x4ED6;&#x4EEC;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x88AB;&#x8C03;&#x7528;.</p>
<ul>
<li>setImmediate &#x8BBE;&#x8BA1;&#x5728;poll&#x9636;&#x6BB5;&#x5B8C;&#x6210;&#x65F6;&#x6267;&#x884C;&#xFF0C;&#x5373;check&#x9636;&#x6BB5;&#xFF1B;</li>
<li>setTimeout &#x8BBE;&#x8BA1;&#x5728;poll&#x9636;&#x6BB5;&#x4E3A;&#x7A7A;&#x95F2;&#x65F6;&#xFF0C;&#x4E14;&#x8BBE;&#x5B9A;&#x65F6;&#x95F4;&#x5230;&#x8FBE;&#x540E;&#x6267;&#x884C;&#xFF1B;&#x4F46;&#x5176;&#x5728;timer&#x9636;&#x6BB5;&#x6267;&#x884C;
&#x5176;&#x4E8C;&#x8005;&#x7684;&#x8C03;&#x7528;&#x987A;&#x5E8F;&#x53D6;&#x51B3;&#x4E8E;&#x5F53;&#x524D;event loop&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x5982;&#x679C;&#x4ED6;&#x4EEC;&#x5728;&#x5F02;&#x6B65;i/o callback&#x4E4B;&#x5916;&#x8C03;&#x7528;&#xFF08;&#x5728;i/o&#x5185;&#x8C03;&#x7528;&#x56E0;&#x4E3A;&#x4E0B;&#x4E00;&#x9636;&#x6BB5;&#x4E3A;check&#x9636;&#x6BB5;&#xFF09;&#xFF0C;&#x5176;&#x6267;&#x884C;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x662F;&#x4E0D;&#x786E;&#x5B9A;&#x7684;,&#x9700;&#x8981;&#x770B;loop&#x7684;&#x6267;&#x884C;&#x524D;&#x7684;&#x8017;&#x65F6;&#x60C5;&#x51B5;&#x3002;</li>
</ul>

        <div class="copyright">Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a>. Dependence <a href="https://nodejs.org">Node.js</a> run.</div>
    </div>
    
</div>

<script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.js"></script>
<script>

  if (!$('.understand-me').length) {
    var bar = $(window).height() - $('.navbar ').height() - $('.page-toc').position().top;
    var count = bar / 26 / 2;
    var barHeight = $('.page-toc').outerHeight();
    $('.page-toc li').eq(0).children('a').addClass('red');
    var arr = [];
    $("h1,h2,h3,h4,h5,h6").each(function () {
      arr.push($(this).position().top);
    });
    var timer
    function dark() {
      clearTimeout(timer)
       timer = setTimeout(function () {
       var top = Math.abs($('.page-toc > ul').position().top);
       var cur = $('.content').scrollTop();
       for (var i = arr.length; i >= 0; i--) {
         if (arr[i] <= cur) {
           break;
         }
       }
       if (i === -1) {
         i = 0;
       }
       $('.page-toc li a').removeClass('red');
       $('.page-toc li').eq(i).children('a').addClass('red');
       let height = $('.page-toc li').eq(i).position().top-$('.page-toc').height(); // 如果当前的offset出去了 回到中间可好？
       $('.page-toc').scrollTop(height+$('.page-toc').height()/2);
     },200)
    }

    $('.content').on('scroll', dark);
  }
</script>
<style>

    ::-webkit-scrollbar{width:14px;}
    ::-webkit-scrollbar-track{background-color:transparent;}
    ::-webkit-scrollbar-thumb{background-color:transparent;}
    ::-webkit-scrollbar-thumb:hover {background-color:transparent}
    ::-webkit-scrollbar-thumb:active {background-color:transparent}

    .page-toc > ul .red {
        background: #f3f3f3;
        z-index: 1;
        border-left: 3px solid #009a61;
        -webkit-transition: all .2s ease;
        transition: all .2s ease;
        color: #000
    }





</style>
</body>
</html>
